const IonRangeSlider=function(element,initOptions={}){let input=element,options=initOptions,calc_count=0,update_tm=0,old_from=0,old_to=0,old_min_interval=null,raf_id=null,dragging=!1,force_redraw=!1,no_diapason=!1,has_tab_index=!0,is_key=!1,is_update=!1,is_start=!0,is_finish=!1,is_active=!1,is_resize=!1,is_click=!1,target="base";const cache={win:window,body:document.body,input:input,cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0},config={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" â€” ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};"INPUT"!==input.nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",input);const config_from_data={skin:input.dataset.skin,type:input.dataset.type,min:input.dataset.min,max:input.dataset.max,from:input.dataset.from,to:input.dataset.to,step:input.dataset.step,min_interval:input.dataset.minInterval,max_interval:input.dataset.maxInterval,drag_interval:input.dataset.dragInterval,values:input.dataset.values,from_fixed:input.dataset.fromFixed,from_min:input.dataset.fromMin,from_max:input.dataset.fromMax,from_shadow:input.dataset.fromShadow,to_fixed:input.dataset.toFixed,to_min:input.dataset.toMin,to_max:input.dataset.toMax,to_shadow:input.dataset.toShadow,prettify_enabled:input.dataset.prettifyEnabled,prettify_separator:input.dataset.prettifySeparator,force_edges:input.dataset.forceEdges,keyboard:input.dataset.keyboard,grid:input.dataset.grid,grid_margin:input.dataset.gridMargin,grid_num:input.dataset.gridNum,grid_snap:input.dataset.gridSnap,hide_min_max:input.dataset.hideMinMax,hide_from_to:input.dataset.hideFromTo,prefix:input.dataset.prefix,postfix:input.dataset.postfix,max_postfix:input.dataset.maxPostfix,decorate_both:input.dataset.decorateBoth,values_separator:input.dataset.valuesSeparator,input_values_separator:input.dataset.inputValuesSeparator,disable:input.dataset.disable,block:input.dataset.block,extra_classes:input.dataset.extraClasses};config_from_data.values=config_from_data.values&&config_from_data.values.split(",");for(let prop in config_from_data)config_from_data.hasOwnProperty(prop)&&(void 0!==config_from_data[prop]&&""!==config_from_data[prop]||delete config_from_data[prop]);let val=input.value;void 0!==val&&""!==val&&(val=val.split(config_from_data.input_values_separator||options.input_values_separator||";"),val[0]&&val[0]==+val[0]&&(val[0]=+val[0]),val[1]&&val[1]==+val[1]&&(val[1]=+val[1]),options&&options.values&&options.values.length?(config.from=val[0]&&options.values.indexOf(val[0]),config.to=val[1]&&options.values.indexOf(val[1])):(config.from=val[0]&&+val[0],config.to=val[1]&&+val[1])),Object.assign(config,options),Object.assign(config,config_from_data),options=config;let update_check={};const result={input:cache.input,slider:null,min:options.min,max:options.max,from:options.from,from_percent:0,from_value:null,to:options.to,to_percent:0,to_value:null},base_html='<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid">1</span>',single_html='<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>',double_html='<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>',disable_html='<span class="irs-disable-mask"></span>',init=function(is_update){no_diapason=!1,coords.p_step=convertToPercent(options.step,!0),target="base",toggleInput(),append(),setMinMax(),is_update?(force_redraw=!0,calc(!0),callOnUpdate()):(force_redraw=!0,calc(!0),callOnStart()),updateScene()},append=function(){const container_html='<span class="irs irs--'+options.skin+" "+options.extra_classes+'"></span>';cache.input.insertAdjacentHTML("beforebegin",container_html),cache.input.setAttribute("readonly","true"),cache.cont=cache.input.previousElementSibling,result.slider=cache.cont,cache.cont.innerHTML=base_html,cache.rs=cache.cont.querySelector(".irs"),cache.min=cache.cont.querySelector(".irs-min"),cache.max=cache.cont.querySelector(".irs-max"),cache.from=cache.cont.querySelector(".irs-from"),cache.to=cache.cont.querySelector(".irs-to"),cache.single=cache.cont.querySelector(".irs-single"),cache.line=cache.cont.querySelector(".irs-line"),cache.grid=cache.cont.querySelector(".irs-grid"),"single"===options.type?(cache.cont.insertAdjacentHTML("beforeend",single_html),cache.bar=cache.cont.querySelector(".irs-bar"),cache.edge=cache.cont.querySelector(".irs-bar--single"),cache.s_single=cache.cont.querySelector(".single"),cache.from.style.visibility="hidden",cache.to.style.visibility="hidden",cache.shad_single=cache.cont.querySelector(".shadow-single")):(cache.cont.insertAdjacentHTML("beforeend",double_html),cache.bar=cache.cont.querySelector(".irs-bar"),cache.s_from=cache.cont.querySelector(".from"),cache.s_to=cache.cont.querySelector(".to"),cache.shad_from=cache.cont.querySelector(".shadow-from"),cache.shad_to=cache.cont.querySelector(".shadow-to"),setTopHandler()),options.hide_from_to&&(cache.from.style.display="none",cache.to.style.display="none",cache.single.style.display="none"),appendGrid(),options.disable?(appendDisableMask(),cache.input.disabled=!0):(cache.input.disabled=!1,removeDisableMask(),bindEvents()),options.disable||(options.block?appendDisableMask():removeDisableMask()),options.drag_interval&&(cache.bar.style.cursor="ew-resize")},setTopHandler=function(){const min=options.min,max=options.max,from=options.from,to=options.to;from>min&&to===max?cache.s_from.classList.add("type_last"):to<max&&cache.s_to.classList.add("type_last")},changeLevel=function(target){switch(target){case"single":coords.p_gap=toFixed(coords.p_pointer-coords.p_single_fake),cache.s_single.classList.add("state_hover");break;case"from":coords.p_gap=toFixed(coords.p_pointer-coords.p_from_fake),cache.s_from.classList.add("state_hover","type_last"),cache.s_to.classList.remove("type_last");break;case"to":coords.p_gap=toFixed(coords.p_pointer-coords.p_to_fake),cache.s_to.classList.add("state_hover","type_last"),cache.s_from.classList.remove("type_last");break;case"both":coords.p_gap_left=toFixed(coords.p_pointer-coords.p_from_fake),coords.p_gap_right=toFixed(coords.p_to_fake-coords.p_pointer),cache.s_to.classList.remove("type_last"),cache.s_from.classList.remove("type_last")}},appendDisableMask=function(){cache.cont.insertAdjacentHTML("beforeend",disable_html),cache.cont.classList.add("irs-disabled")},removeDisableMask=function(){cache.cont.classList.remove(".irs-disable-mask"),cache.cont.classList.remove("irs-disabled")},remove=function(){cache.cont.remove(),cache.cont=null,cache.win.removeEventListener("keydown",key.bind(this,"keyboard")),cache.body.removeEventListener("touchmove",pointerMove.bind(this)),cache.body.removeEventListener("mousemove",pointerMove.bind(this)),cache.win.removeEventListener("touchend",pointerUp.bind(this)),cache.win.removeEventListener("mouseup",pointerUp.bind(this)),cache.grid_labels=[],coords.big=[],coords.big_w=[],coords.big_p=[],coords.big_x=[],cancelAnimationFrame(raf_id)},bindEvents=function(){no_diapason||(cache.body.addEventListener("touchmove",pointerMove.bind(this)),cache.body.addEventListener("mousemove",pointerMove.bind(this)),cache.win.addEventListener("touchend",pointerUp.bind(this)),cache.win.addEventListener("mouseup",pointerUp.bind(this)),cache.line.addEventListener("touchstart",pointerClick.bind(this,"click"),{passive:!0}),cache.line.addEventListener("mousedown",pointerClick.bind(this,"click")),cache.line.addEventListener("focus",pointerFocus.bind(this)),options.drag_interval&&"double"===options.type?(cache.bar.addEventListener("touchstart",pointerDown.bind(this,"both"),{passive:!0}),cache.bar.addEventListener("mousedown",pointerDown.bind(this,"both"))):(cache.bar.addEventListener("touchstart",pointerClick.bind(this,"click"),{passive:!0}),cache.bar.addEventListener("mousedown",pointerClick.bind(this,"click"))),"single"===options.type?(cache.single.addEventListener("touchstart",pointerDown.bind(this,"single"),{passive:!0}),cache.s_single.addEventListener("touchstart",pointerDown.bind(this,"single"),{passive:!0}),cache.shad_single.addEventListener("touchstart",pointerClick.bind(this,"click"),{passive:!0}),cache.single.addEventListener("mousedown",pointerDown.bind(this,"single")),cache.s_single.addEventListener("mousedown",pointerDown.bind(this,"single")),cache.edge.addEventListener("mousedown",pointerClick.bind(this,"click")),cache.shad_single.addEventListener("touchstart",pointerClick.bind(this,"click"),{passive:!0})):(cache.single.addEventListener("touchstart",pointerDown.bind(this,null),{passive:!0}),cache.single.addEventListener("mousedown",pointerDown.bind(this,null)),cache.from.addEventListener("touchstart",pointerDown.bind(this,"from"),{passive:!0}),cache.s_from.addEventListener("touchstart",pointerDown.bind(this,"from"),{passive:!0}),cache.to.addEventListener("touchstart",pointerDown.bind(this,"to"),{passive:!0}),cache.s_to.addEventListener("touchstart",pointerDown.bind(this,"to"),{passive:!0}),cache.shad_from.addEventListener("touchstart",pointerClick.bind(this,"click"),{passive:!0}),cache.shad_to.addEventListener("touchstart",pointerClick.bind(this,"click"),{passive:!0}),cache.from.addEventListener("mousedown",pointerDown.bind(this,"from")),cache.s_from.addEventListener("mousedown",pointerDown.bind(this,"from")),cache.to.addEventListener("mousedown",pointerDown.bind(this,"to")),cache.s_to.addEventListener("mousedown",pointerDown.bind(this,"to")),cache.shad_from.addEventListener("mousedown",pointerClick.bind(this,"click")),cache.shad_to.addEventListener("mousedown",pointerClick.bind(this,"click"))),options.keyboard&&cache.line.addEventListener("keydown",key.bind(this,"keyboard")))},pointerFocus=function(e){if(target)cache.line.focus();else{let x,$handle;$handle="single"===options.type?cache.single:cache.from,x=$handle.getBoundingClientRect().left,x+=$handle.getBoundingClientRect().width/2-1,pointerClick("single",{preventDefault:function(){},pageX:x})}},pointerMove=function(e){if(!dragging)return;const x=e.pageX||e.touches&&e.touches[0].pageX;coords.x_pointer=x-coords.x_gap,calc()},pointerUp=function(e){if(!is_active)return;is_active=!1;const hoverState=cache.cont.querySelector(".state_hover");hoverState&&hoverState.classList.remove("state_hover"),force_redraw=!0,updateScene(),restoreOriginalMinInterval(),(cache.cont.contains(e.target)||dragging)&&callOnFinish(),dragging=!1},pointerDown=function(destination,e){const x=e.pageX||e.touches&&e.touches[0].pageX;2!==e.button&&("both"===destination&&setTempMinInterval(),destination||(destination=target||"from"),target=destination,is_active=!0,dragging=!0,coords.x_gap=cache.rs.getBoundingClientRect().left,coords.x_pointer=x-coords.x_gap,calcPointerPercent(),changeLevel(destination),cache.line.dispatchEvent(new Event("focus")),updateScene())},pointerClick=function(destination,e){const x=e.pageX||e.touches&&e.touches[0].pageX;2!==e.button&&(target=destination,is_click=!0,coords.x_gap=cache.rs.getBoundingClientRect().left,coords.x_pointer=+(x-coords.x_gap).toFixed(),force_redraw=!0,calc(),cache.line.dispatchEvent(new Event("focus")))},key=function(destination,e){if(!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey))switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault(),moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault(),moveByKey(!0)}},moveByKey=function(right){let p=coords.p_pointer;const p_step=options.step/((options.max-options.min)/100);right?p+=p_step:p-=p_step,coords.x_pointer=toFixed(coords.w_rs/100*p),is_key=!0,calc()},setMinMax=function(){if(options){if(options.hide_min_max)return cache.min.style.display="none",void(cache.max.style.display="none");if(options.values.length)cache.min.innerHTML=decorate(options.p_values[options.min]),cache.max.innerHTML=decorate(options.p_values[options.max]);else{const min_pretty=_prettify(options.min),max_pretty=_prettify(options.max);result.min_pretty=min_pretty,result.max_pretty=max_pretty,cache.min.innerHTML=decorate(min_pretty,options.min),cache.max.innerHTML=decorate(max_pretty,options.max)}labels.w_min=cache.min.offsetWidth,labels.w_max=cache.max.offsetWidth}},setTempMinInterval=function(){const interval=result.to-result.from;null===old_min_interval&&(old_min_interval=options.min_interval),options.min_interval=interval},restoreOriginalMinInterval=function(){null!==old_min_interval&&(options.min_interval=old_min_interval,old_min_interval=null)},calc=function(update){if(!options)return;if(calc_count++,(10===calc_count||update)&&(calc_count=0,coords.w_rs=cache.rs.offsetWidth,calcHandlePercent()),!coords.w_rs)return;calcPointerPercent();let handle_x=getHandleX();switch("both"===target&&(coords.p_gap=0,handle_x=getHandleX()),"click"===target&&(coords.p_gap=coords.p_handle/2,handle_x=getHandleX(),target=options.drag_interval?"both_one":chooseHandle(handle_x)),target){case"base":const w=(options.max-options.min)/100,f=(result.from-options.min)/w,t=(result.to-options.min)/w;coords.p_single_real=toFixed(f),coords.p_from_real=toFixed(f),coords.p_to_real=toFixed(t),coords.p_single_real=checkDiapason(coords.p_single_real,options.from_min,options.from_max),coords.p_from_real=checkDiapason(coords.p_from_real,options.from_min,options.from_max),coords.p_to_real=checkDiapason(coords.p_to_real,options.to_min,options.to_max),coords.p_single_fake=convertToFakePercent(coords.p_single_real),coords.p_from_fake=convertToFakePercent(coords.p_from_real),coords.p_to_fake=convertToFakePercent(coords.p_to_real),target=null;break;case"single":if(options.from_fixed)break;coords.p_single_real=convertToRealPercent(handle_x),coords.p_single_real=calcWithStep(coords.p_single_real),coords.p_single_real=checkDiapason(coords.p_single_real,options.from_min,options.from_max),coords.p_single_fake=convertToFakePercent(coords.p_single_real);break;case"from":if(options.from_fixed)break;coords.p_from_real=convertToRealPercent(handle_x),coords.p_from_real=calcWithStep(coords.p_from_real),coords.p_from_real>coords.p_to_real&&(coords.p_from_real=coords.p_to_real),coords.p_from_real=checkDiapason(coords.p_from_real,options.from_min,options.from_max),coords.p_from_real=checkMinInterval(coords.p_from_real,coords.p_to_real,"from"),coords.p_from_real=checkMaxInterval(coords.p_from_real,coords.p_to_real,"from"),coords.p_from_fake=convertToFakePercent(coords.p_from_real);break;case"to":if(options.to_fixed)break;coords.p_to_real=convertToRealPercent(handle_x),coords.p_to_real=calcWithStep(coords.p_to_real),coords.p_to_real<coords.p_from_real&&(coords.p_to_real=coords.p_from_real),coords.p_to_real=checkDiapason(coords.p_to_real,options.to_min,options.to_max),coords.p_to_real=checkMinInterval(coords.p_to_real,coords.p_from_real,"to"),coords.p_to_real=checkMaxInterval(coords.p_to_real,coords.p_from_real,"to"),coords.p_to_fake=convertToFakePercent(coords.p_to_real);break;case"both":if(options.from_fixed||options.to_fixed)break;handle_x=toFixed(handle_x+.001*coords.p_handle),coords.p_from_real=convertToRealPercent(handle_x)-coords.p_gap_left,coords.p_from_real=calcWithStep(coords.p_from_real),coords.p_from_real=checkDiapason(coords.p_from_real,options.from_min,options.from_max),coords.p_from_real=checkMinInterval(coords.p_from_real,coords.p_to_real,"from"),coords.p_from_fake=convertToFakePercent(coords.p_from_real),coords.p_to_real=convertToRealPercent(handle_x)+coords.p_gap_right,coords.p_to_real=calcWithStep(coords.p_to_real),coords.p_to_real=checkDiapason(coords.p_to_real,options.to_min,options.to_max),coords.p_to_real=checkMinInterval(coords.p_to_real,coords.p_from_real,"to"),coords.p_to_fake=convertToFakePercent(coords.p_to_real);break;case"both_one":if(options.from_fixed||options.to_fixed)break;const real_x=convertToRealPercent(handle_x),from=result.from_percent,to=result.to_percent,full=to-from,half=full/2;let new_from=real_x-half,new_to=real_x+half;new_from<0&&(new_from=0,new_to=new_from+full),new_to>100&&(new_to=100,new_from=new_to-full),coords.p_from_real=calcWithStep(new_from),coords.p_from_real=checkDiapason(coords.p_from_real,options.from_min,options.from_max),coords.p_from_fake=convertToFakePercent(coords.p_from_real),coords.p_to_real=calcWithStep(new_to),coords.p_to_real=checkDiapason(coords.p_to_real,options.to_min,options.to_max),coords.p_to_fake=convertToFakePercent(coords.p_to_real)}"single"===options.type?(coords.p_bar_x=coords.p_handle/2,coords.p_bar_w=coords.p_single_fake,result.from_percent=coords.p_single_real,result.from=convertToValue(coords.p_single_real),result.from_pretty=_prettify(result.from),options.values.length&&(result.from_value=options.values[result.from])):(coords.p_bar_x=toFixed(coords.p_from_fake+coords.p_handle/2),coords.p_bar_w=toFixed(coords.p_to_fake-coords.p_from_fake),result.from_percent=coords.p_from_real,result.from=convertToValue(coords.p_from_real),result.from_pretty=_prettify(result.from),result.to_percent=coords.p_to_real,result.to=convertToValue(coords.p_to_real),result.to_pretty=_prettify(result.to),options.values.length&&(result.from_value=options.values[result.from],result.to_value=options.values[result.to])),calcMinMax(),calcLabels()},calcPointerPercent=function(){coords.w_rs?(coords.x_pointer<0||isNaN(coords.x_pointer)?coords.x_pointer=0:coords.x_pointer>coords.w_rs&&(coords.x_pointer=coords.w_rs),coords.p_pointer=toFixed(coords.x_pointer/coords.w_rs*100)):coords.p_pointer=0},convertToRealPercent=function(fake){const full=100-coords.p_handle;return fake/full*100},convertToFakePercent=function(real){const full=100-coords.p_handle;return real/100*full},getHandleX=function(){const max=100-coords.p_handle;let x=toFixed(coords.p_pointer-coords.p_gap);return x<0?x=0:x>max&&(x=max),x},calcHandlePercent=function(){"single"===options.type?coords.w_handle=cache.s_single.offsetWidth:coords.w_handle=cache.s_from.offsetWidth,coords.p_handle=toFixed(coords.w_handle/coords.w_rs*100)},chooseHandle=function(real_x){if("single"===options.type)return"single";{const m_point=coords.p_from_real+(coords.p_to_real-coords.p_from_real)/2;return real_x>=m_point?options.to_fixed?"from":"to":options.from_fixed?"to":"from"}},calcMinMax=function(){coords.w_rs&&(labels.p_min=labels.w_min/coords.w_rs*100,labels.p_max=labels.w_max/coords.w_rs*100)},calcLabels=function(){coords.w_rs&&!options.hide_from_to&&("single"===options.type?(labels.w_single=cache.single.offsetWidth,labels.p_single_fake=labels.w_single/coords.w_rs*100,labels.p_single_left=coords.p_single_fake+coords.p_handle/2-labels.p_single_fake/2,labels.p_single_left=checkEdges(labels.p_single_left,labels.p_single_fake)):(labels.w_from=cache.from.offsetWidth,labels.p_from_fake=labels.w_from/coords.w_rs*100,labels.p_from_left=coords.p_from_fake+coords.p_handle/2-labels.p_from_fake/2,labels.p_from_left=toFixed(labels.p_from_left),labels.p_from_left=checkEdges(labels.p_from_left,labels.p_from_fake),labels.w_to=cache.to.offsetWidth,labels.p_to_fake=labels.w_to/coords.w_rs*100,labels.p_to_left=coords.p_to_fake+coords.p_handle/2-labels.p_to_fake/2,labels.p_to_left=toFixed(labels.p_to_left),labels.p_to_left=checkEdges(labels.p_to_left,labels.p_to_fake),labels.w_single=cache.single.offsetWidth,labels.p_single_fake=labels.w_single/coords.w_rs*100,labels.p_single_left=(labels.p_from_left+labels.p_to_left+labels.p_to_fake)/2-labels.p_single_fake/2,labels.p_single_left=toFixed(labels.p_single_left),labels.p_single_left=checkEdges(labels.p_single_left,labels.p_single_fake)))},updateScene=function(){raf_id&&(cancelAnimationFrame(raf_id),raf_id=null),clearTimeout(update_tm),update_tm=null,options&&(drawHandles(),is_active?raf_id=requestAnimationFrame(updateScene):update_tm=setTimeout(updateScene,300))},drawHandles=function(){coords.w_rs=cache.rs.offsetWidth,coords.w_rs&&(coords.w_rs!==coords.w_rs_old&&(target="base",is_resize=!0),(coords.w_rs!==coords.w_rs_old||force_redraw)&&(setMinMax(),calc(!0),drawLabels(),options.grid&&(calcGridMargin(),calcGridLabels()),force_redraw=!0,coords.w_rs_old=coords.w_rs,drawShadow()),coords.w_rs&&(dragging||force_redraw||is_key)&&((old_from!==result.from||old_to!==result.to||force_redraw||is_key)&&(drawLabels(),cache.bar.style.left=coords.p_bar_x+"%",cache.bar.style.width=coords.p_bar_w+"%","single"===options.type?(cache.bar.style.left="0",cache.bar.style.width=coords.p_bar_w+coords.p_bar_x+"%",cache.s_single.style.left=coords.p_single_fake+"%",cache.single.style.left=labels.p_single_left+"%"):(cache.s_from.style.left=coords.p_from_fake+"%",cache.s_to.style.left=coords.p_to_fake+"%",(old_from!==result.from||force_redraw)&&(cache.from.style.left=labels.p_from_left+"%"),(old_to!==result.to||force_redraw)&&(cache.to.style.left=labels.p_to_left+"%"),cache.single.style.left=labels.p_single_left+"%"),writeToInput(),old_from===result.from&&old_to===result.to||is_start||(cache.input.dispatchEvent(new Event("change")),cache.input.dispatchEvent(new Event("input"))),old_from=result.from,old_to=result.to,is_resize||is_update||is_start||is_finish||callOnChange(),(is_key||is_click)&&(is_key=!1,is_click=!1,callOnFinish()),is_update=!1,is_resize=!1,is_finish=!1),is_start=!1,is_key=!1,is_click=!1,force_redraw=!1))},drawLabels=function(){if(!options)return;const values_num=options.values.length,p_values=options.p_values;let text_single,text_from,text_to,from_pretty,to_pretty;if(!options.hide_from_to)if("single"===options.type)values_num?(text_single=decorate(p_values[result.from]),cache.single.innerHTML=text_single):(from_pretty=_prettify(result.from),text_single=decorate(from_pretty,result.from),cache.single.innerHTML=text_single),calcLabels(),labels.p_single_left<labels.p_min+1?cache.min.style.visibility="hidden":cache.min.style.visibility="visible",labels.p_single_left+labels.p_single_fake>100-labels.p_max-1?cache.max.style.visibility="hidden":cache.max.style.visibility="visible";else{values_num?(options.decorate_both?(text_single=decorate(p_values[result.from]),text_single+=options.values_separator,text_single+=decorate(p_values[result.to])):text_single=decorate(p_values[result.from]+options.values_separator+p_values[result.to]),text_from=decorate(p_values[result.from]),text_to=decorate(p_values[result.to]),cache.single.innerHTML=text_single,cache.from.innerHTML=text_from,cache.to.innerHTML=text_to):(from_pretty=_prettify(result.from),to_pretty=_prettify(result.to),options.decorate_both?(text_single=decorate(from_pretty,result.from),text_single+=options.values_separator,text_single+=decorate(to_pretty,result.to)):text_single=decorate(from_pretty+options.values_separator+to_pretty,result.to),text_from=decorate(from_pretty,result.from),text_to=decorate(to_pretty,result.to),cache.single.innerHTML=text_single,cache.from.innerHTML=text_from,cache.to.innerHTML=text_to),calcLabels();const min=Math.min(labels.p_single_left,labels.p_from_left),single_left=labels.p_single_left+labels.p_single_fake,to_left=labels.p_to_left+labels.p_to_fake;let max=Math.max(single_left,to_left);labels.p_from_left+labels.p_from_fake>=labels.p_to_left?(cache.from.style.visibility="hidden",cache.to.style.visibility="hidden",cache.single.style.visibility="visible",result.from===result.to?("from"===target?cache.from.style.visibility="visible":"to"===target?cache.to.style.visibility="visible":target||(cache.from.style.visibility="visible"),cache.single.style.visibility="hidden",max=to_left):(cache.from.style.visibility="hidden",cache.to.style.visibility="hidden",cache.single.style.visibility="visible",max=Math.max(single_left,to_left))):(cache.from.style.visibility="visible",cache.to.style.visibility="visible",cache.single.style.visibility="hidden"),min<labels.p_min+1?cache.min.style.visibility="hidden":cache.min.style.visibility="visible",max>100-labels.p_max-1?cache.max.style.visibility="hidden":cache.max.style.visibility="visible"}},drawShadow=function(){const o=options,c=cache,is_from_min="number"==typeof o.from_min&&!isNaN(o.from_min),is_from_max="number"==typeof o.from_max&&!isNaN(o.from_max),is_to_min="number"==typeof o.to_min&&!isNaN(o.to_min),is_to_max="number"==typeof o.to_max&&!isNaN(o.to_max);let from_min,from_max,to_min,to_max;"single"===o.type?o.from_shadow&&(is_from_min||is_from_max)?(from_min=convertToPercent(is_from_min?o.from_min:o.min),from_max=convertToPercent(is_from_max?o.from_max:o.max)-from_min,from_min=toFixed(from_min-coords.p_handle/100*from_min),from_max=toFixed(from_max-coords.p_handle/100*from_max),from_min+=coords.p_handle/2,c.shad_single.style.display="block",c.shad_single.style.left=from_min+"%",c.shad_single.style.width=from_max+"%"):c.shad_single.style.display="none":(o.from_shadow&&(is_from_min||is_from_max)?(from_min=convertToPercent(is_from_min?o.from_min:o.min),from_max=convertToPercent(is_from_max?o.from_max:o.max)-from_min,from_min=toFixed(from_min-coords.p_handle/100*from_min),from_max=toFixed(from_max-coords.p_handle/100*from_max),from_min+=coords.p_handle/2,c.shad_from.style.display="block",c.shad_from.style.left=from_min+"%",c.shad_from.style.width=from_max+"%"):c.shad_from.style.display="none",o.to_shadow&&(is_to_min||is_to_max)?(to_min=convertToPercent(is_to_min?o.to_min:o.min),to_max=convertToPercent(is_to_max?o.to_max:o.max)-to_min,to_min=toFixed(to_min-coords.p_handle/100*to_min),to_max=toFixed(to_max-coords.p_handle/100*to_max),to_min+=coords.p_handle/2,c.shad_to.style.display="block",c.shad_to.style.left=to_min+"%",c.shad_to.style.width=to_max+"%"):c.shad_to.style.display="none")},writeToInput=function(){"single"===options.type?(options.values.length?cache.input.setAttribute("value",result.from_value):cache.input.setAttribute("value",result.from),cache.input.dataset.from=result.from):(options.values.length?cache.input.setAttribute("value",result.from_value+options.input_values_separator+result.to_value):cache.input.setAttribute("value",result.from+options.input_values_separator+result.to),cache.input.dataset.from=result.from,cache.input.dataset.to=result.to)},callOnStart=function(){writeToInput(),options.onStart&&"function"==typeof options.onStart&&(options.scope?options.onStart.call(options.scope,result):options.onStart(result))},callOnChange=function(){writeToInput(),options.onChange&&"function"==typeof options.onChange&&(options.scope?options.onChange.call(options.scope,result):options.onChange(result))},callOnFinish=function(){writeToInput(),options.onFinish&&"function"==typeof options.onFinish&&(options.scope?options.onFinish.call(options.scope,result):options.onFinish(result))},callOnUpdate=function(){writeToInput(),options.onUpdate&&"function"==typeof options.onUpdate&&(options.scope?options.onUpdate.call(options.scope,result):options.onUpdate(result))},toggleInput=function(){cache.input.classList.toggle("irs-hidden-input"),has_tab_index?cache.input.setAttribute("tabindex","-1"):cache.input.removeAttribute("tabindex"),has_tab_index=!has_tab_index},convertToPercent=function(value,no_min){let diapason=options.max-options.min,one_percent=diapason/100,val,percent;return diapason?(val=no_min?value:value-options.min,percent=val/one_percent,toFixed(percent)):(no_diapason=!0,0)},convertToValue=function(percent){let min=options.min,max=options.max,min_decimals=min.toString().split(".")[1],max_decimals=max.toString().split(".")[1],min_length,max_length,avg_decimals=0,abs=0;if(0===percent)return options.min;if(100===percent)return options.max;min_decimals&&(min_length=min_decimals.length,avg_decimals=min_length),max_decimals&&(max_length=max_decimals.length,avg_decimals=max_length),min_length&&max_length&&(avg_decimals=min_length>=max_length?min_length:max_length),min<0&&(abs=Math.abs(min),min=+(min+abs).toFixed(avg_decimals),max=+(max+abs).toFixed(avg_decimals));let number=(max-min)/100*percent+min,string=options.step.toString().split(".")[1],result;return string?number=+number.toFixed(string.length):(number/=options.step,number*=options.step,number=+number.toFixed(0)),abs&&(number-=abs),result=string?+number.toFixed(string.length):toFixed(number),result<options.min?result=options.min:result>options.max&&(result=options.max),result},calcWithStep=function(percent){let rounded=Math.round(percent/coords.p_step)*coords.p_step;return rounded>100&&(rounded=100),100===percent&&(rounded=100),toFixed(rounded)},checkMinInterval=function(p_current,p_next,type){let o=options,current,next;return o.min_interval?(current=convertToValue(p_current),next=convertToValue(p_next),"from"===type?next-current<o.min_interval&&(current=next-o.min_interval):current-next<o.min_interval&&(current=next+o.min_interval),convertToPercent(current)):p_current},checkMaxInterval=function(p_current,p_next,type){let o=options,current,next;return o.max_interval?(current=convertToValue(p_current),next=convertToValue(p_next),"from"===type?next-current>o.max_interval&&(current=next-o.max_interval):current-next>o.max_interval&&(current=next+o.max_interval),convertToPercent(current)):p_current},checkDiapason=function(p_num,min,max){let num=convertToValue(p_num);return"number"!=typeof min&&(min=options.min),"number"!=typeof max&&(max=options.max),num<min&&(num=min),num>max&&(num=max),convertToPercent(num)},toFixed=function(num){return+(num=num.toFixed(20))},_prettify=function(num){return options.prettify_enabled?options.prettify&&"function"==typeof options.prettify?options.prettify(num):prettify(num):num},prettify=function(num){return num.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+options.prettify_separator)},checkEdges=function(left,width){return options.force_edges?(left<0?left=0:left>100-width&&(left=100-width),toFixed(left)):toFixed(left)},validate=function(){let o=options,r=result,v=o.values,vl=v.length,value,i;if("string"==typeof o.min&&(o.min=+o.min),"string"==typeof o.max&&(o.max=+o.max),"string"==typeof o.from&&(o.from=+o.from),"string"==typeof o.to&&(o.to=+o.to),"string"==typeof o.step&&(o.step=+o.step),"string"==typeof o.from_min&&(o.from_min=+o.from_min),"string"==typeof o.from_max&&(o.from_max=+o.from_max),"string"==typeof o.to_min&&(o.to_min=+o.to_min),"string"==typeof o.to_max&&(o.to_max=+o.to_max),"string"==typeof o.grid_num&&(o.grid_num=+o.grid_num),o.max<o.min&&(o.max=o.min),vl)for(o.p_values=[],o.min=0,o.max=vl-1,o.step=1,o.grid_num=o.max,o.grid_snap=!0,i=0;i<vl;i++)value=+v[i],isNaN(value)?value=v[i]:(v[i]=value,value=_prettify(value)),o.p_values.push(value);("number"!=typeof o.from||isNaN(o.from))&&(o.from=o.min),("number"!=typeof o.to||isNaN(o.to))&&(o.to=o.max),"single"===o.type?(o.from<o.min&&(o.from=o.min),o.from>o.max&&(o.from=o.max)):(o.from<o.min&&(o.from=o.min),o.from>o.max&&(o.from=o.max),o.to<o.min&&(o.to=o.min),o.to>o.max&&(o.to=o.max),update_check.from&&(update_check.from!==o.from&&o.from>o.to&&(o.from=o.to),update_check.to!==o.to&&o.to<o.from&&(o.to=o.from)),o.from>o.to&&(o.from=o.to),o.to<o.from&&(o.to=o.from)),("number"!=typeof o.step||isNaN(o.step)||!o.step||o.step<0)&&(o.step=1),"number"==typeof o.from_min&&o.from<o.from_min&&(o.from=o.from_min),"number"==typeof o.from_max&&o.from>o.from_max&&(o.from=o.from_max),"number"==typeof o.to_min&&o.to<o.to_min&&(o.to=o.to_min),"number"==typeof o.to_max&&o.from>o.to_max&&(o.to=o.to_max),r&&(r.min!==o.min&&(r.min=o.min),r.max!==o.max&&(r.max=o.max),(r.from<r.min||r.from>r.max)&&(r.from=o.from),(r.to<r.min||r.to>r.max)&&(r.to=o.to)),("number"!=typeof o.min_interval||isNaN(o.min_interval)||!o.min_interval||o.min_interval<0)&&(o.min_interval=0),("number"!=typeof o.max_interval||isNaN(o.max_interval)||!o.max_interval||o.max_interval<0)&&(o.max_interval=0),o.min_interval&&o.min_interval>o.max-o.min&&(o.min_interval=o.max-o.min),o.max_interval&&o.max_interval>o.max-o.min&&(o.max_interval=o.max-o.min)},decorate=function(num,original){let decorated="",o=options;return o.prefix&&(decorated+=o.prefix),decorated+=num,o.max_postfix&&(o.values.length&&num===o.p_values[o.max]?(decorated+=o.max_postfix,o.postfix&&(decorated+=" ")):original===o.max&&(decorated+=o.max_postfix,o.postfix&&(decorated+=" "))),o.postfix&&(decorated+=o.postfix),decorated},updateFrom=function(){result.from=options.from,result.from_percent=convertToPercent(result.from),result.from_pretty=_prettify(result.from),options.values&&(result.from_value=options.values[result.from])},updateTo=function(){result.to=options.to,result.to_percent=convertToPercent(result.to),result.to_pretty=_prettify(result.to),options.values&&(result.to_value=options.values[result.to])},updateResult=function(){result.min=options.min,result.max=options.max,updateFrom(),updateTo()},appendGrid=function(){if(!options.grid)return;let o=options,i,z,total=o.max-o.min,big_num=o.grid_num,big_p=0,big_w=0,small_max=4,local_small_max,small_p,small_w=0,result,html="";for(calcGridMargin(),o.grid_snap&&(big_num=total/o.step),big_num>50&&(big_num=50),big_p=toFixed(100/big_num),big_num>4&&(small_max=3),big_num>7&&(small_max=2),big_num>14&&(small_max=1),big_num>28&&(small_max=0),i=0;i<big_num+1;i++){for(local_small_max=small_max,big_w=toFixed(big_p*i),big_w>100&&(big_w=100),coords.big[i]=big_w,small_p=(big_w-big_p*(i-1))/(local_small_max+1),z=1;z<=local_small_max&&0!==big_w;z++)small_w=toFixed(big_w-small_p*z),html+='<span class="irs-grid-pol small" style="left: '+small_w+'%"></span>';html+='<span class="irs-grid-pol" style="left: '+big_w+'%"></span>',result=convertToValue(big_w),result=o.values.length?o.p_values[result]:_prettify(result),html+='<span class="irs-grid-text js-grid-text-'+i+'" style="left: '+big_w+'%">'+result+"</span>"}coords.big_num=Math.ceil(big_num+1),cache.cont.classList.add("irs-with-grid"),cache.grid.innerHTML=html,cacheGridLabels()},cacheGridLabels=function(){for(let i=0;i<coords.big_num;i++)cache.grid_labels.push(cache.grid.querySelector(".js-grid-text-"+i));calcGridLabels()},calcGridLabels=function(){const start=[],finish=[],num=coords.big_num;for(let i=0;i<num;i++)coords.big_w[i]=cache.grid_labels[i].offsetWidth,coords.big_p[i]=toFixed(coords.big_w[i]/coords.w_rs*100),coords.big_x[i]=toFixed(coords.big_p[i]/2),start[i]=toFixed(coords.big[i]-coords.big_x[i]),finish[i]=toFixed(start[i]+coords.big_p[i]);options.force_edges&&(start[0]<-coords.grid_gap&&(start[0]=-coords.grid_gap,finish[0]=toFixed(start[0]+coords.big_p[0]),coords.big_x[0]=coords.grid_gap),finish[num-1]>100+coords.grid_gap&&(finish[num-1]=100+coords.grid_gap,start[num-1]=toFixed(finish[num-1]-coords.big_p[num-1]),coords.big_x[num-1]=toFixed(coords.big_p[num-1]-coords.grid_gap))),calcGridCollision(2,start,finish),calcGridCollision(4,start,finish);for(let i=0;i<num;i++){const label=cache.grid_labels[i];coords.big_x[i]!==Number.POSITIVE_INFINITY&&(label.style.marginLeft=-coords.big_x[i]+"%")}},calcGridCollision=function(step,start,finish){const num=coords.big_num;for(let i=0;i<num;i+=step){let next_i=i+step/2;if(next_i>=num)break;const label=cache.grid_labels[next_i];finish[i]<=start[next_i]?label.style.visibility="visible":label.style.visibility="hidden"}},calcGridMargin=function(){options.grid_margin&&(coords.w_rs=cache.rs.offsetWidth,coords.w_rs&&("single"===options.type?coords.w_handle=cache.s_single.offsetWidth:coords.w_handle=cache.s_from.offsetWidth,coords.p_handle=toFixed(coords.w_handle/coords.w_rs*100),coords.grid_gap=toFixed(coords.p_handle/2-.1),cache.grid.style.width=toFixed(100-coords.p_handle)+"%",cache.grid.style.left=coords.grid_gap+"%"))},update=function(newOptions){input&&(is_update=!0,options.from=result.from,options.to=result.to,update_check.from=result.from,update_check.to=result.to,options=Object.assign(options,newOptions),validate(),updateResult(newOptions),toggleInput(),remove(),init(!0))},reset=function(){input&&(updateResult(),update())},destroy=function(){input&&(toggleInput(),input.removeAttribute("readonly"),remove(),input=null,options=null)};return{update:function(options){update(options)},reset:function(){reset()},destroy:function(){destroy()},init:function(){return validate(),init(),this}}};function ionRangeSlider(element,options=null){return"string"==typeof element&&(element=document.querySelector(element)),new IonRangeSlider(element,options).init()}
